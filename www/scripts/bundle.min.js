angular.module("templates",["components/card/card-template.html","components/icon/icon-template.html","components/interest-card-list/interest-card-list-template.html","components/interest-card/interest-card-template.html","components/interest-form/interest-form-template.html","components/interest-manager/interest-manager-template.html","components/logo/logo-template.html","components/menu/menu-template.html","components/show-card-list/show-card-list-template.html","components/show-card/show-card-template.html","components/topbar/topbar-template.html","components/viewport/viewport-template.html","views/home/home-template.html","views/interests/interests-template.html"]),angular.module("components/card/card-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/card/card-template.html",'<div class="card">\n  <ng-transclude></ng-transclude>\n</div>\n')}]),angular.module("components/icon/icon-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/icon/icon-template.html",'<i class="icon {{$ctrl.icon}}"></i>\n')}]),angular.module("components/interest-card-list/interest-card-list-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/interest-card-list/interest-card-list-template.html",'<div class="card-list-container">\n  <ul class="card-list">\n    <li ng-repeat="interest in $ctrl.interests">\n      <interest-card data-interest="interest"></interest-card>\n    </li>\n  </ul>\n</div>\n')}]),angular.module("components/interest-card/interest-card-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/interest-card/interest-card-template.html",'<div class="interest-card">\n  <card>\n    <div class="interest-keyword"\n      ng-bind="$ctrl.interest.keyword">\n    </div>\n    <button class="button button-secondary button-circled"\n      ng-click="$ctrl.remove($ctrl.interest)">\n      <icon data-icon="ion-android-close"></icon>\n    </button>\n  </card>\n</div>\n')}]),angular.module("components/interest-form/interest-form-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/interest-form/interest-form-template.html",'<form class="interest-form" ng-submit="$ctrl.add()">\n  <div class="input-container input-container-buttoned">\n    <input type="text" ng-model="$ctrl.interest.keyword"\n      placeholder="Exemplo: Beatles" />\n    <button type="submit" class="button button-primary button-circled">\n      <icon data-icon="ion-plus"></icon>\n    </button>\n  </div>\n</form>\n')}]),angular.module("components/interest-manager/interest-manager-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/interest-manager/interest-manager-template.html",'<div class="interest-manager">\n  <interest-form></interest-form>\n  <interest-card-list></interest-card-list>\n</div>\n')}]),angular.module("components/logo/logo-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/logo/logo-template.html",'<div class="logo-container">\n  <div class="logo"></div>\n</div>\n')}]),angular.module("components/menu/menu-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/menu/menu-template.html",'<div class="menu-container">\n  <div class="menu-item-container menu-item-has-link">\n    <a href="javascript:void(0)" ng-click="$ctrl.goToInterestsView()">\n      <icon data-icon="ion-plus">\n    </a>\n  </div>\n</div>\n')}]),angular.module("components/show-card-list/show-card-list-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/show-card-list/show-card-list-template.html",'<div class="card-list-container show-card-list-container">\n  <div class="show-card-list-messages-container">\n    <div class="show-card-list-messages-no-interests-found"\n      ng-show="!$ctrl.interests.length">\n      <card>\n        <div class="show-card-list-messages-icon-container">\n          <icon data-icon="ion-wand"></icon><br/>\n        </div>\n        <div class="show-card-list-messages-text-container">\n          A mágica só acontece quando você nos diz o que gosta.<br/>\n          Para adicionar interesses, use o sinal de mais acima.\n        </div>\n      </card>\n    </div>\n    <div class="show-card-list-messages-results-found"\n      ng-show="$ctrl.shows.length">\n      <div class="show-card-list-messages-icon-container">\n        <icon data-icon="ion-flag"></icon><br/>\n      </div>\n      <div class="show-card-list-messages-text-container">\n        Yup! <strong ng-bind="$ctrl.shows.length"></strong>\n        <span ng-bind="$ctrl.results.label"></span>\n      </div>\n    </div>\n    <div class="show-card-list-messages-no-results-found"\n      ng-show="!$ctrl.shows">\n      <div class="show-card-list-messages-icon-container">\n        <icon data-icon="ion-map"></icon><br/>\n      </div>\n      <div class="show-card-list-messages-text-container">\n        Nada interessante nas próximas 24h.<br/>\n        <a class="button button-primary" href="javascript:void(0)"\n          ng-click="$ctrl.goToInterestsView()">\n          Adicionar mais interesses\n        </a>\n      </div>\n    </div>\n    <div class="show-card-list-messages-server-error"\n      ng-show="$ctrl.error">\n      <div class="show-card-list-messages-icon-container">\n        <icon data-icon="ion-help-buoy"></icon><br/>\n      </div>\n      <div class="show-card-list-messages-text-container"\n        ng-bind="$ctrl.error">\n      </div>\n    </div>\n  </div>\n  <ul class="card-list">\n    <li ng-repeat="show in $ctrl.shows">\n      <show-card data-show="show"></show-card>\n    </li>\n  </ul>\n</div>\n')}]),angular.module("components/show-card/show-card-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/show-card/show-card-template.html",'<card>\n  <div class="show-card-title-container">\n    <h2 ng-bind="$ctrl.show.title"></h2>\n  </div>\n  <div class="show-card-details-container">\n    <div class="show-card-details-item">\n      <icon data-icon="ion-calendar"></icon>\n      <span class="show-card-details-item-text"\n        ng-bind="$ctrl.show.date">\n      </span>\n    </div>\n    <div class="show-card-details-item">\n      <icon data-icon="ion-android-time"></icon>\n      <span class="show-card-details-item-text"\n        ng-bind="$ctrl.show.time">\n      </span>\n    </div>\n    <div class="show-card-details-item show-card-details-item-media">\n      <icon data-icon="ion-ios-monitor-outline"></icon>\n      <span class="show-card-details-item-text"\n        ng-click="$ctrl.showMediaDetails($ctrl.show.media)"\n        ng-bind="$ctrl.show.media.name">\n      </span>\n    </div>\n  </div>\n</card>\n')}]),angular.module("components/topbar/topbar-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/topbar/topbar-template.html",'<div class="topbar-container">\n  <div class="topbar-content" ng-if="$ctrl.title">\n    <div class="topbar-back-trigger" ng-click="$ctrl.back()">\n      <icon data-icon="ion-ios-arrow-back"></icon>\n      <icon data-icon="ion-android-arrow-back"></icon>\n    </div>\n    <h1 ng-bind="$ctrl.title"></h1>\n  </div>\n  <div class="topbar-content" ng-if="!$ctrl.title">\n    <ng-transclude></ng-transclude>\n  </div>\n</div>\n')}]),angular.module("components/viewport/viewport-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("components/viewport/viewport-template.html",'<div class="viewport" ng-style="$ctrl.style">\n  <ng-transclude></ng-transclude>\n</div>\n')}]),angular.module("views/home/home-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("views/home/home-template.html","<topbar>\n  <logo></logo>\n  <menu></menu>\n</topbar>\n<viewport>\n  <show-card-list></show-card-list>\n</viewport>\n")}]),angular.module("views/interests/interests-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("views/interests/interests-template.html",'<topbar data-title="Interesses"></topbar>\n<viewport>\n  <interest-manager></interest-manager>\n</viewport>\n')}]),function(){"use strict";window.app=angular.module("teleflik",["ionic","templates","ngResource","angulartics","angulartics.google.analytics"]).run(function($ionicPlatform){$ionicPlatform.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}).config(function($stateProvider,$urlRouterProvider){function getViewTemplateUrl(view){return[VIEWS_ROOT,view,view].join("/")+"-template.html"}var VIEWS_ROOT="views";$stateProvider.state("home",{url:"/",templateUrl:getViewTemplateUrl("home")}).state("interests",{url:"/interests",templateUrl:getViewTemplateUrl("interests")}),$urlRouterProvider.otherwise("/")})}(),function(){app.component("card",{templateUrl:"components/card/card-template.html",transclude:!0})}(),function(){"use strict";app.component("icon",{templateUrl:"components/icon/icon-template.html",bindings:{icon:"@"}})}(),function(){function interestListController($scope,TRACKS,trackService,interestService){function getList(){_public.interests=interestService.getAll(),trackService.track(TRACKS.interests.loadedList,{numberOfInterests:_public.interests.length})}function updateList(evt,interest){_public.interests.unshift(interest),trackService.track(TRACKS.interests.updatedList,{interestUpdated:interest.keyword,numberOfInterests:_public.interests.length})}var _public=this;$scope.$on("interest list outdated",updateList),$scope.$on("interest list item removed",getList),getList()}app.component("interestCardList",{templateUrl:"components/interest-card-list/interest-card-list-template.html",controller:["$scope","TRACKS","trackService","interestService",interestListController]})}(),function(){function interestCardController($scope,$ionicPopup,TRACKS,trackService,interestService){var _public=this;_public.remove=function(interest){trackService.track(TRACKS.interests.clickedToRemove,{interestKeyword:interest.keyword}),$ionicPopup.confirm({title:"Remover Interesse",template:"Tem certeza que deseja remover esse interesse?"}).then(function(hasConfirmed){hasConfirmed?(interestService.remove(interest),$scope.$emit("interest list item removed")):trackService.track(TRACKS.interests.declinedToRemove,{interestKeyword:interest.keyword})})}}app.component("interestCard",{templateUrl:"components/interest-card/interest-card-template.html",controller:["$scope","$ionicPopup","TRACKS","trackService","interestService",interestCardController],bindings:{interest:"="}})}(),function(){function interestFormController($scope,TRACKS,trackService,interestService){var _public=this;_public.interest={},_public.add=function(){var keyword=_public.interest.keyword;trackService.track(TRACKS.interests.submitted,{interestKeyword:keyword}),keyword&&keyword.trim()&&(_public.interest.id=(new Date).getTime(),interestService.add(_public.interest),$scope.$emit("interest added",_public.interest)),_public.interest={}}}app.component("interestForm",{templateUrl:"components/interest-form/interest-form-template.html",controller:["$scope","TRACKS","trackService","interestService",interestFormController]})}(),function(){function interestManagerController($scope){$scope.$on("interest added",function(evt,interest){$scope.$broadcast("interest list outdated",interest)})}app.component("interestManager",{templateUrl:"components/interest-manager/interest-manager-template.html",controller:["$scope",interestManagerController]})}(),function(){app.component("logo",{templateUrl:"components/logo/logo-template.html"})}(),function(){function menuController($location,TRACKS,trackService){var _public=this;_public.goToInterestsView=function(){trackService.track(TRACKS.interests.clickedAddButton,{context:"topbar"}),$location.path("/interests")}}app.component("menu",{templateUrl:"components/menu/menu-template.html",controller:["$location","TRACKS","trackService",menuController]})}(),function(){function showCardListController($location,TRACKS,trackService,interestService,showsService){function builtResults(shows){var baseLabel=shows.length>1?"interesses":"interesse";return{label:baseLabel+" à vista."}}function onGettingInterestingShows(response){_public.shows=!!response.length&&response,_public.shows?(_public.results=builtResults(_public.shows),trackService.track(TRACKS.shows.loaded,{numberOfShows:_public.shows.length})):trackService.track(TRACKS.shows.blankslates.noResults,{interests:_public.interests})}function onGettingError(error){_public.error=buildError(error),trackService.track(TRACKS.shows.failed,{reason:error})}function buildError(error){return"offline"==error?"Parece que você está sem internet.":"O servidor parece estar com àgua no pescoço. Tente novamente mais tarde."}var _public=this;_public.interests=interestService.getAll(),_public.shows=[],_public.results=null,_public.error=null,_public.goToInterestsView=function(){trackService.track(TRACKS.interests.clickedAddButton,{context:"no results blankslate button"}),$location.path("/interests")},_public.interests.length?showsService.getInteresting(_public.interests).then(function(response){onGettingInterestingShows(response)},function(error){onGettingError(error)}):trackService.track(TRACKS.shows.blankslates.noInterests)}app.component("showCardList",{templateUrl:"components/show-card-list/show-card-list-template.html",controller:["$location","TRACKS","trackService","interestService","showsService",showCardListController]})}(),function(){function showCardController($ionicPopup){var _public=this;_public.showMediaDetails=function(media){$ionicPopup.alert({title:"Detalhes do Canal",template:"Nome: "+media.name+"<br/>Número: "+media.number})}}app.component("showCard",{templateUrl:"components/show-card/show-card-template.html",controller:["$ionicPopup",showCardController],bindings:{show:"="}})}(),function(){function topbarController($window){var _public=this;_public.back=function(){$window.history.back()}}app.component("topbar",{templateUrl:"components/topbar/topbar-template.html",controller:["$window",topbarController],transclude:!0,bindings:{title:"@"}})}(),function(){function viewportController($window,$scope){function setViewportHeight(){_public.style={height:getViewportHeight()}}function getViewportHeight(){var topbarHeight=ionic.Platform.isIOS()?70:50;return $window.innerHeight-topbarHeight+"px"}function refreshViewportHeight(){setViewportHeight(),$scope.$digest()}var _public=this;_public.$onDestroy=function(){$window.removeEventListener("resize",refreshViewportHeight)},$window.addEventListener("resize",refreshViewportHeight),setViewportHeight()}app.component("viewport",{templateUrl:"components/viewport/viewport-template.html",transclude:!0,controller:["$window","$scope",viewportController]})}(),function(){"use strict";var BASE_URL="http://leecher.herokuapp.com/leechs",TV_PROVIDER_BASE_URL="http://programacao.netcombo.com.br/gatekeeper/",TV_PROVIDER_DEFAULT_PARAMS="select?q=id_cidade:40&wt=json&rows=100000",TV_PROVIDER_CHANNELS_PARAMS="&sort=cn_canal+asc&fl=id_canal+st_canal+cn_canal+nome&fq=nome%3A*&_="+(new Date).getTime(),TV_PROVIDER_SHOWS_PARAMS="&sort=id_canal+asc%2Cdh_inicio+asc&fl=dh_fim+dh_inicio+st_titulo+titulo+id_programa+id_canal&_="+(new Date).getTime();app.constant("API",{ENDPOINTS:{BASE:BASE_URL,CHANNELS:TV_PROVIDER_BASE_URL+"canal/"+TV_PROVIDER_DEFAULT_PARAMS+TV_PROVIDER_CHANNELS_PARAMS,SHOWS:TV_PROVIDER_BASE_URL+"exibicao/"+TV_PROVIDER_DEFAULT_PARAMS+TV_PROVIDER_SHOWS_PARAMS}})}(),function(){"use strict";app.constant("TRACKS",{channels:{createdCache:"cached channels",expiredCache:"expired channels cache",requesting:{fromServer:"requesting channels from server",fromCache:"requesting channels from cache"}},shows:{loaded:"loaded shows list",failed:"failed on getting interesting shows",blankslates:{noResults:"shown blankslate for no interesting shows found",noInterests:"shown blankslate no interests found"},createdCache:"cached shows",expiredCache:"expired shows cache",requesting:{fromServer:"requesting shows from server",fromCache:"requesting shows from cache"}},interests:{loadedList:"loaded interests list",updatedList:"updated interests list",submitted:"submitted interest",added:"added interest",clickedToRemove:"clicked to remove interest",declinedToRemove:"declined to remove interests",removed:"removed interest",removedAll:"removed all interests",clickedAddButton:"clicked add interest button",backButton:"clicked interests view back button"}})}(),function(){app.factory("channelResource",["$resource","API",function($resource,API){return $resource(API.ENDPOINTS.BASE,{},{get:{method:"GET",params:{url:API.ENDPOINTS.CHANNELS}}})}])}(),function(){app.factory("showResource",["$resource","API",function($resource,API){function getDateIntervalParms(){start=(new Date).getTime(),end=start+ONE_DAY;var begining=getDateItervalBeginingParams(start,end),ending=getDateItervalEndingParams(start,end);return getDateIntervalStringParam(begining,ending)}function getDateItervalBeginingParams(start,end){return{start:getISOStringDate(start-FIFTEEN_MINUTES),finish:getISOStringDate(end)}}function getDateItervalEndingParams(start,end){return{start:getISOStringDate(start+FIFTEEN_MINUTES),finish:getISOStringDate(end)}}function getISOStringDate(timestamp){return new Date(timestamp).toISOString()}function getDateIntervalStringParam(begining,ending){var param=DATE_INTERVAL_BASE_PARAM.replace("{{beginingStart}}",begining.start).replace("{{beginingFinish}}",begining.finish).replace("{{endingStart}}",ending.start).replace("{{endingFinish}}",ending.finish);return encodeURI(param)}var DATE_INTERVAL_BASE_PARAM="&fq=dh_inicio:[{{beginingStart}} TO {{beginingFinish}}] dh_fim:[{{endingStart}} TO {{endingFinish}}]",FIFTEEN_MINUTES=9e5,ONE_DAY=864e5;return $resource(API.ENDPOINTS.BASE,{},{get:{method:"GET",params:{url:API.ENDPOINTS.SHOWS+getDateIntervalParms()}}})}])}(),function(){app.service("interestService",["TRACKS","trackService","storageService",function(TRACKS,trackService,storageService){function getInterests(){return JSON.parse(storageService.get(INTERESTS_STORAGE_KEY))||[]}function setInterests(interests){storageService.set(INTERESTS_STORAGE_KEY,JSON.stringify(interests))}function removeInterest(interest,interests){for(var i=0;i<interests.length;i++)interests[i].id===interest.id&&(interests.splice(i,1),trackService.track(TRACKS.interests.removed,{interestKeyword:interest.keyword,interestAddedOn:new Date(interest.id).toString()}));return interests}function removeAll(){storageService.remove(INTERESTS_STORAGE_KEY),trackService.track(TRACKS.interests.removedAll)}var INTERESTS_STORAGE_KEY="interests",_public={};return _public.add=function(interest){var interests=getInterests();interests.push(interest),setInterests(interests),trackService.track(TRACKS.interests.added,{interestKeyword:interest.keyword})},_public.getAll=function(){return getInterests()},_public.remove=function(interest){var interests=getInterests();interests=removeInterest(interest,interests),interests.length?setInterests(interests):removeAll()},_public.hasInterests=function(){return this.getAll().length},_public}])}(),function(){app.service("internetService",["$window",function($window){var _public={};return _public.isOnline=function(){return $window.navigator.onLine},_public}])}(),function(){app.service("showsCacheService",["$q","TRACKS","trackService","internetService","channelResource","showResource","storageService",function($q,TRACKS,trackService,internetService,channelResource,showResource,storageService){function buildRequests(){return cachedResponses=[],[getRequest("channels",channelResource),getRequest("shows",showResource)]}function getRequest(itemType,itemResource){return hasCacheExpired(itemType)?(cachedResponses.push(!1),trackService.track(TRACKS[itemType].requesting.fromServer),itemResource.get().$promise):(cachedResponses.push(!0),trackService.track(TRACKS[itemType].requesting.fromCache),cachedItemPromise(itemType))}function hasCacheExpired(storageKey){var item=getCachedItem(storageKey);if(!item||isCachedItemExpired(item,storageKey))return!0}function isCachedItemExpired(item,storageKey){var isExpired=item.expiration<(new Date).getTime();if(isExpired)return trackService.track(TRACKS[storageKey].expiredCache,{expiredOn:new Date(item.expiration).toISOString(),now:(new Date).toISOString()}),!0}function cachedItemPromise(itemKey){return $q(function(resolve){setTimeout(function(){resolve(getCachedItem(itemKey).content)},CACHED_REQUEST_DELAY)})}function getCachedItem(itemKey){var item=storageService.get(itemKey);return JSON.parse(item)}function cacheResponses(responses){for(var i=0;i<responses.length;i++)if(!cachedResponses[i]){var cacheType=0===i?"channels":"shows",cacheInfo=buildCacheInfo(cacheType);cacheResponse(cacheType,cacheInfo,responses[i],i)}}function buildCacheInfo(cacheType){return{key:cacheType,expiration:getCacheExpirationValue(cacheType)}}function getCacheExpirationValue(cacheType){var maxAge="shows"==cacheType?TWO_HOURS:ONE_DAY;return(new Date).getTime()+maxAge}function cacheResponse(cacheType,cacheInfo,response){var item={expiration:cacheInfo.expiration,content:response};storageService.set(cacheType,JSON.stringify(item)),trackCache(cacheType,cacheInfo,response)}function trackCache(cacheType,cacheInfo,response){trackService.track(TRACKS[cacheType].createdCache,{toExpireOn:new Date(cacheInfo.expiration).toISOString(),numberOfResultsCached:JSON.parse(response.content).response.docs.length})}var _public={},ONE_DAY=864e5,TWO_HOURS=72e5,CACHED_REQUEST_DELAY=1e3,cachedResponses=[];return _public.get=function(){return $q(function(resolve,reject){internetService.isOnline()||reject("offline"),$q.all(buildRequests()).then(function(responses){cacheResponses(responses),resolve(responses)},function(error){reject(error)})})},_public}])}(),function(){"use strict";app.service("showsService",["$q","showsCacheService","interestService",function($q,showsCacheService,interestService){function filterShowsByInterests(responses,interests){for(var interestingShows=[],channels=indexChannelsById(parseResponse(responses[0])),shows=parseResponse(responses[1]),i=0;i<shows.length;i++){var show=shows[i];isInterestingShow(show,interests)&&!wasShowAlreadyFiltered(show,interestingShows)&&(show=formatInterestingShow(show,channels),interestingShows.push(show))}return interestingShows}function parseResponse(response){var parsedResponse=JSON.parse(response.content);return parsedResponse.response.docs}function indexChannelsById(channels){for(var indexedChannels={},i=0;i<channels.length;i++)indexedChannels[channels[i].id_canal]=channels[i];return indexedChannels}function isInterestingShow(show,interests){for(var i=0;i<interests.length;i++){var showTitle=lowercasify(show.titulo),interestKeyword=lowercasify(interests[i].keyword);if(matchesInterest(interestKeyword,showTitle))return!0}}function matchesInterest(interestKeyword,showTitle){var startOfTitle=new RegExp("^"+interestKeyword),middleOfTitle=new RegExp("\\s"+interestKeyword);return startOfTitle.test(showTitle)||middleOfTitle.test(showTitle)}function wasShowAlreadyFiltered(show,interestingShows){for(var i=0;i<interestingShows.length;i++)if(interestingShows[i].title==show.titulo)return!0}function formatInterestingShow(show,channels){return{title:show.titulo,date:formatInterestingShowDate(show.dh_inicio),time:formatInterestingShowTime(show.dh_inicio),media:getChannel(show,channels)}}function formatInterestingShowDate(dateISOString){var date=new Date(dateISOString),day=appendLeadingZero(date.getDate()),month=appendLeadingZero(date.getMonth()+1);return[day,month].join("/")}function formatInterestingShowTime(dateISOString){var date=new Date(dateISOString),hours=appendLeadingZero(date.getHours()),minutes=appendLeadingZero(date.getMinutes());return[hours,minutes].join(":")}function getChannel(show,channels){var channel=channels[show.id_canal];return{name:channel.nome,number:channel.cn_canal}}function appendLeadingZero(number){return number<10?"0"+number:number}function lowercasify(text){return text.toLowerCase()}var _public={};return _public.getInteresting=function(interests){return $q(function(resolve,reject){showsCacheService.get().then(function(responses){var interestingShows=filterShowsByInterests(responses,interests);resolve(interestingShows)},function(error){reject(error)})})},_public}])}(),function(){app.service("storageService",["$window",function($window){var _public={};return _public.set=function(key,value){$window.localStorage.setItem(key,value)},_public.get=function(key){return $window.localStorage.getItem(key)},_public.remove=function(key){return $window.localStorage.removeItem(key)},_public}])}(),function(){app.service("trackService",function(){var _public={};return _public.track=function(label,details){mixpanel&&mixpanel.track(label,details)},_public})}();